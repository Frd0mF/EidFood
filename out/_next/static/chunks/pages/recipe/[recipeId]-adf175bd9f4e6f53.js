(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{5323:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/recipe/[recipeId]",function(){return s(7809)}])},7809:function(e,l,s){"use strict";s.r(l),s.d(l,{__N_SSG:function(){return h},default:function(){return f}});var t=s(5893),a=s(7294),i=s(2679),r=s(1312),c=s(3750),n=s(1163),o=s(3299),d=s(1664),x=s.n(d),m=function(e){let{dbComments:l,dbReplies:s}=e,[i,r]=(0,a.useState)(""),[c,d]=(0,a.useState)(l||[]),[m,h]=(0,a.useState)(""),f=(0,n.useRouter)(),{data:p}=(0,o.useSession)(),u=async e=>{e.preventDefault();let l=f.query.recipeId,s=await fetch("/api/comments/addComment/".concat(l),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:i})}),t=await s.json();d([t,...c]),r("")},g=async(e,l)=>{e.preventDefault();let s=await fetch("/api/comments/addReply/".concat(l),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reply:m})}),t=await s.json();d(c.map(e=>e.id===l?{...e,replies:[t,...e.replies]}:e)),h("")};return(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(null==p?void 0:p.user)?(0,t.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,t.jsx)("img",{className:"w-10 h-10 rounded-full",src:p.user.image,alt:""}),(0,t.jsx)("p",{className:"text-sm text-font-color-light font-semibold",children:p.user.name})]}),(0,t.jsxs)("form",{onSubmit:u,className:"w-full flex flex-col items-end",children:[(0,t.jsx)("textarea",{value:i,onChange:e=>r(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:border-gray-400",placeholder:"Add a comment..."}),(0,t.jsx)("button",{disabled:!i,className:"w-32 p-2 mt-2 text-white bg-primary rounded-lg hover:bg-primary-hover disabled:bg-font-color focus:outline-none focus:bg-primary-hover",type:"submit",children:"Comment"})]})]}):(0,t.jsx)("div",{className:"flex space-x-4 mt-6",children:(0,t.jsxs)("h1",{className:"text-2xl font-semibold text-font-color-light",children:["Please",(0,t.jsx)(x(),{href:"/register",className:"underline mx-1",children:"sign in"})," to comment"]})}),c.map(e=>{var l,s,a,i,r;return(0,t.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,t.jsxs)("div",{className:"flex space-x-4 items-center",children:[(0,t.jsx)("img",{className:"w-10 h-10 rounded-full",src:null===(l=e.user)||void 0===l?void 0:l.image,alt:""}),(0,t.jsxs)("div",{className:"flex-1 p-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("p",{className:"font-semibold",children:null===(s=e.user)||void 0===s?void 0:s.name}),(0,t.jsx)("p",{className:"text-sm",children:e.text})]})]},e.id),null===(a=e.replies)||void 0===a?void 0:a.map(e=>{var l,s;return(0,t.jsxs)("div",{className:"flex space-x-4 ml-24",children:[(0,t.jsx)("img",{className:"w-10 h-10 rounded-full",src:null===(l=e.user)||void 0===l?void 0:l.image,alt:""}),(0,t.jsxs)("div",{className:"flex-1 p-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("p",{className:"font-semibold",children:null===(s=e.user)||void 0===s?void 0:s.name}),(0,t.jsx)("p",{className:"text-sm",children:e.text})]})]},e.id)}),(0,t.jsxs)("div",{className:"flex w-1/2 ml-24 space-x-4",children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,t.jsx)("img",{className:"w-10 h-10 rounded-full",src:null==p?void 0:null===(i=p.user)||void 0===i?void 0:i.image,alt:""}),(0,t.jsx)("p",{className:"text-sm text-font-color-light font-semibold",children:null==p?void 0:null===(r=p.user)||void 0===r?void 0:r.name})]}),(0,t.jsxs)("form",{onSubmit:l=>g(l,e.id),className:"w-full flex flex-col items-end",children:[(0,t.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:border-gray-400",placeholder:"Add a reply..."}),(0,t.jsx)("button",{disabled:!m,className:"w-32 p-2 mt-2 text-white bg-primary rounded-lg hover:bg-primary-hover disabled:bg-font-color focus:outline-none focus:bg-primary-hover",type:"submit",children:"Reply"})]})]})]})})]})},h=!0,f=function(e){var l,s;let{recipe:o,dbComments:d}=e,[x,h]=a.useState(!1),f=(0,n.useRouter)(),p=()=>{f.replace(f.asPath)},{hours:u,minutes:g}={hours:Math.floor((s=o.totalTime)/60),minutes:s%60},j=(0,t.jsxs)("svg",{"aria-hidden":"true",className:"w-8 h-8 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("title",{children:"First star"}),(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]}),N=(0,t.jsxs)("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-300 dark:text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("title",{children:"Fifth star"}),(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]}),v=Math.round(10)/2,y=[];for(let e=1;e<=5;e++)e<=v?y.push(j):y.push(N);let b=async e=>{},w=async()=>{var e;await fetch("/api/recipeOps/save/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipeId:(null===(e=o.uri)||void 0===e?void 0:e.split("#")[1])||o.id})}).then(e=>e.json()).then(e=>{p()}).catch(e=>console.log("Error: ".concat(e)))},C=async()=>{var e;await fetch("/api/recipeOps/unsave/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipeId:(null===(e=o.uri)||void 0===e?void 0:e.split("#")[1])||o.id})}).then(e=>e.json()).then(e=>{p()}).catch(e=>console.log("Error: ".concat(e)))},S=e=>{e.target.src="/images/recipe-placeholder.png",console.log("error")};return(0,t.jsxs)("div",{className:"grid grid-cols-12 my-12 mx-36",children:[(0,t.jsx)("div",{className:"col-span-8",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-col items-start",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-primary",children:o.label}),(0,t.jsxs)("h3",{className:"ml-3 text-2xl text-font-color-light",children:["(",o.yield," Servings)"]})]}),(0,t.jsxs)("div",{className:"flex flex-row my-3 space-x-12",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center mt-3 ml-4 space-x-2",children:[(0,t.jsx)("p",{className:"text-xl text-font-color-light",children:"Total time"}),(0,t.jsxs)("p",{className:"text-xl text-font-color-light",children:[(0,t.jsxs)("span",{className:u?"":"hidden",children:[u," hour"]})," ",(0,t.jsxs)("span",{className:g?"":"hidden",children:[g," minutes"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center mt-3 ml-4 space-x-2",children:[(0,t.jsx)("p",{className:"text-xl text-font-color-light",children:"Cuisine type"}),(0,t.jsx)("p",{className:"text-xl text-font-color-light first-letter:uppercase",children:o.cuisineType})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center mt-3 ml-4 space-x-2",children:[(0,t.jsx)("p",{className:"text-xl text-font-color-light",children:"Meal type"}),(0,t.jsx)("p",{className:"text-xl text-font-color-light first-letter:uppercase",children:o.mealType})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center mt-3 ml-4 space-x-2",children:[(0,t.jsx)("p",{className:"text-xl text-font-color-light",children:"Dish type"}),(0,t.jsx)("p",{className:"text-xl text-font-color-light first-letter:uppercase",children:o.dishType})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center mt-3 ml-4 space-x-2",children:[(0,t.jsx)("p",{className:"text-xl text-font-color-light",children:"99 Reviews"}),(0,t.jsx)("div",{className:"flex mb-4",children:y})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-4",children:o.ingredients.map((e,l)=>(0,t.jsxs)("div",{className:"flex flex-col items-center p-1 my-2 bg-ingredient-background w-fit h-fit",children:[e.image?(0,t.jsx)(i.LazyLoadImage,{src:e.image,alt:e.text,width:192,height:192}):(0,t.jsx)("img",{className:"w-48",src:"/logo.png",alt:"ingredient image not found"}),(0,t.jsx)("p",{className:"w-48 mt-4 text-xl text-center truncate text-font-color-light first-letter:uppercase",children:e.food})]},l))}),(0,t.jsxs)("div",{className:"flex flex-col mt-12",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-font-color-light",children:"Health Labels"}),(0,t.jsx)("div",{className:"flex flex-row flex-wrap",children:o.healthLabels.map((e,l)=>(0,t.jsx)("div",{className:"mx-1 my-2 text-xl rounded-full text-font-color-light bg-primary",children:(0,t.jsx)("p",{className:"w-full px-4 py-2 text-secondary",children:e})},l))}),(0,t.jsx)(m,{dbComments:d})]})]})}),(0,t.jsx)("div",{className:"col-span-4",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{onError:S,className:"object-cover rounded-md shadow-xl w-80 h-80",src:o.image,alt:o.label}),o.saved?x?(0,t.jsx)(c.sF8,{onMouseLeave:()=>h(!1),onClick:C,className:"absolute top-0 right-0 w-12 h-12 p-2 text-primary"}):(0,t.jsx)(c.ytW,{onMouseEnter:()=>h(!0),onClick:C,className:"absolute top-0 right-0 w-12 h-12 p-2 text-primary"}):x?(0,t.jsx)(c.ytW,{onMouseLeave:()=>h(!1),onClick:w,className:"absolute top-0 right-0 w-12 h-12 p-2 text-primary"}):(0,t.jsx)(c.sF8,{onMouseEnter:()=>h(!0),onClick:w,className:"absolute top-0 right-0 w-12 h-12 p-2 text-primary"})]}),(0,t.jsx)(r.Z,{count:5,onChange:b,size:42,isHalf:!0,emptyIcon:(0,t.jsx)("i",{className:"far fa-star"}),halfIcon:(0,t.jsx)("i",{className:"fa fa-star-half-alt"}),fullIcon:(0,t.jsx)("i",{className:"fa fa-star"}),activeColor:"#ffd700"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"bg-ingredient-background px-3 py-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-black",children:"Ingredients"}),(0,t.jsx)("ul",{className:"flex flex-col mt-6 space-y-2",children:o.ingredients.map((e,l)=>(0,t.jsxs)("li",{className:"flex flex-row items-center space-x-2",children:[(0,t.jsx)("div",{className:"flex flex-col items-center justify-center w-8 h-8 text-xl text-white rounded-full bg-primary",children:(0,t.jsx)("p",{children:l+1})}),(0,t.jsxs)("p",{className:"text-xl w-96 text-font-color-light",children:[e.text,"."]})]},l))})]}),(0,t.jsx)("h1",{className:"mt-12 text-2xl font-bold text-font-color-light",children:"Nutrients (per serving)"}),null===(l=o.digest)||void 0===l?void 0:l.map((e,l)=>(0,t.jsxs)("div",{className:"flex flex-row w-full p-2 px-6 my-2 bg-ingredient-background",children:[(0,t.jsx)("p",{className:"flex justify-start w-1/3 text-xl text-font-color-light",children:e.label}),(0,t.jsxs)("p",{className:"flex justify-center w-1/3 text-xl text-font-color-light",children:[(e.total/o.yield).toFixed(2)," ",e.unit]}),(0,t.jsxs)("p",{className:"flex justify-end w-1/3 text-xl text-font-color-light",children:[(e.daily/o.yield).toFixed(2)," %"]})]},l))]})]})})]})}}},function(e){e.O(0,[13,791,774,888,179],function(){return e(e.s=5323)}),_N_E=e.O()}]);